{"version":3,"file":"version-66d27412.js","sources":["../src/app/core/redux/types/navigation.js","../src/app/core/redux/reducers/navigation.js","../src/app/core/redux/reducers/routing.js","../src/app/core/redux/types/version.js","../src/app/core/redux/reducers/version.js","../src/app/core/redux/routerMiddleware.js","../src/app/core/redux/store.js","../src/app/core/redux/actions/version.js","../src/app/core/redux/selectors/navigation.js","../src/app/core/redux/selectors/version.js"],"sourcesContent":["const ACTION_PREFIX = '@NAVIGATION/';\r\nexport const GET_NODE_TREE = `${ACTION_PREFIX}_GET_NODE_TREE`;\r\nexport const SET_NODE_TREE = `${ACTION_PREFIX}_SET_NODE_TREE`;\r\nexport const GET_NODE_TREE_ERROR = `${ACTION_PREFIX}_GET_NODE_TREE_ERROR`;\r\n","import { Map, fromJS, List } from 'immutable';\r\n\r\nimport {\r\n  SET_NODE_TREE,\r\n  GET_NODE_TREE_ERROR,\r\n} from '~/core/redux/types/navigation';\r\n\r\nconst initialState = Map({\r\n  root: null,\r\n  treeDepends: new List([]),\r\n  isError: false,\r\n  isReady: false,\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_NODE_TREE: {\r\n      return state.set('root', fromJS(action.nodes)).set('isReady', true);\r\n    }\r\n    case GET_NODE_TREE_ERROR: {\r\n      return state.set('isError', true);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { OrderedMap, fromJS, List, Set } from 'immutable';\r\nimport {\r\n  SET_ENTRY,\r\n  SET_NAVIGATION_PATH,\r\n  SET_ANCESTORS,\r\n  SET_TARGET_PROJECT,\r\n  SET_ROUTE,\r\n  SET_SIBLINGS,\r\n  SET_SURROGATE_KEYS,\r\n  UPDATE_LOADING_STATE,\r\n} from '~/core/redux/types/routing';\r\n\r\nlet initialState = OrderedMap({\r\n  contentTypeId: null,\r\n  currentPath: '/',\r\n  currentNode: [],\r\n  currentNodeAncestors: List(),\r\n  currentProject: 'unknown',\r\n  entryID: null,\r\n  entry: null,\r\n  currentTreeId: null,\r\n  entryDepends: List(),\r\n  isLoading: false,\r\n  location: null,\r\n  mappedEntry: OrderedMap(),\r\n  nodeDepends: List(),\r\n  notFound: false,\r\n  staticRoute: null,\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_ANCESTORS: {\r\n      if (action.ancestors) {\r\n        return state.set('currentNodeAncestors', fromJS(action.ancestors));\r\n      }\r\n      return state.set('currentNodeAncestors', fromJS(action.ancestors));\r\n    }\r\n    case SET_ENTRY: {\r\n      const {\r\n        entry,\r\n        mappedEntry,\r\n        node = {},\r\n        isLoading = false,\r\n        notFound = false,\r\n      } = action;\r\n      let nextState;\r\n\r\n      if (!entry) {\r\n        nextState = state\r\n          .set('entryID', null)\r\n          .set('entry', null)\r\n          .set('mappedEntry', OrderedMap())\r\n          .set('isLoading', isLoading)\r\n          .set('notFound', notFound);\r\n      } else {\r\n        nextState = state\r\n          .set('entryID', action.id)\r\n          .set('entry', fromJS(entry))\r\n          .set('isLoading', isLoading)\r\n          .set('notFound', notFound);\r\n\r\n        if (mappedEntry && Object.keys(mappedEntry).length > 0)\r\n          nextState = nextState\r\n            .set('mappedEntry', fromJS(mappedEntry))\r\n            .set('entry', fromJS({ sys: entry.sys }));\r\n      }\r\n\r\n      if (!node) {\r\n        return nextState.set('nodeDepends', null).set('currentNode', null);\r\n      } else {\r\n        // On Set Node, we reset all dependants.\r\n        return nextState\r\n          .set('currentNode', fromJS(node))\r\n          .removeIn(['currentNode', 'entry']); // We have the entry stored elsewhere, so lets not keep it twice.\r\n      }\r\n    }\r\n    case UPDATE_LOADING_STATE: {\r\n      return state.set('isLoading', action.isLoading);\r\n    }\r\n    case SET_NAVIGATION_PATH: {\r\n      let staticRoute = false;\r\n      if (action.staticRoute) {\r\n        staticRoute = { ...action.staticRoute };\r\n      }\r\n      if (action.path) {\r\n        // Don't run a path update on initial load as we allready should have it in redux\r\n        const entryUri = state.getIn(['entry', 'sys', 'uri']);\r\n        if (entryUri != action.path) {\r\n          return state\r\n            .set('currentPath', fromJS(action.path))\r\n            .set('location', fromJS(action.location))\r\n            .set(\r\n              'staticRoute',\r\n              fromJS({\r\n                ...staticRoute,\r\n                route: { ...staticRoute.route, component: null },\r\n              })\r\n            )\r\n            .set('isLoading', typeof window !== 'undefined');\r\n        } else {\r\n          return state.set('location', fromJS(action.location)).set(\r\n            'staticRoute',\r\n            fromJS({\r\n              ...staticRoute,\r\n              route: { ...staticRoute.route, component: null },\r\n            })\r\n          );\r\n        }\r\n      }\r\n      return state;\r\n    }\r\n    case SET_ROUTE: {\r\n      return state.set('nextPath', action.path);\r\n    }\r\n    case SET_SIBLINGS: {\r\n      // Can be null in some cases like the homepage.\r\n      let currentNodeSiblingParent = null;\r\n      let siblingIDs = [];\r\n      if (action.siblings && action.siblings.length > 0) {\r\n        currentNodeSiblingParent = action.siblings[0].parentId;\r\n        siblingIDs = action.siblings.map(node => {\r\n          return node.id;\r\n        });\r\n      }\r\n      let currentNodeDepends = state.get('nodeDepends');\r\n      const allNodeDepends = Set.union([Set(siblingIDs), currentNodeDepends]);\r\n      return state\r\n        .set('nodeDepends', allNodeDepends)\r\n        .set('currentNodeSiblings', fromJS(action.siblings))\r\n        .set('currentNodeSiblingsParent', currentNodeSiblingParent);\r\n    }\r\n    case SET_SURROGATE_KEYS: {\r\n      return state.set('surrogateKeys', action.keys);\r\n    }\r\n    case SET_TARGET_PROJECT: {\r\n      return state\r\n        .set('currentProject', action.project)\r\n        .set('currentTreeId', '') //getTreeID(action.project))\r\n        .set('allowedGroups', fromJS(action.allowedGroups));\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","const VERSION_PREFIX = '@VERSION/';\r\nexport const SET_VERSION = `${VERSION_PREFIX}SET_VERSION`;\r\nexport const SET_VERSION_STATUS = `${VERSION_PREFIX}SET_VERSION_STATUS`;\r\n","import { Map } from 'immutable';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nlet initialState = Map({\r\n  commitRef: null,\r\n  buildNo: null,\r\n  contensisVersionStatus: 'published',\r\n});\r\n\r\nexport default (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_VERSION_STATUS: {\r\n      return state.set('contensisVersionStatus', action.status);\r\n    }\r\n    case SET_VERSION: {\r\n      return state\r\n        .set('commitRef', action.commitRef)\r\n        .set('buildNo', action.buildNo);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { CALL_HISTORY_METHOD } from '~/core/redux/types/routing';\r\n\r\n/**\r\n * This middleware captures CALL_HISTORY_METHOD actions to redirect to the\r\n * provided history object. This will prevent these actions from reaching your\r\n * reducer or any middleware that comes after this one.\r\n */\r\n/* eslint-disable no-unused-vars */\r\nconst routerMiddleware = history => store => next => action => {\r\n  if (action.type !== CALL_HISTORY_METHOD) {\r\n    return next(action);\r\n  }\r\n\r\n  const {\r\n    payload: { method, args },\r\n  } = action;\r\n  history[method](...args);\r\n};\r\n\r\nexport default routerMiddleware;\r\n","import { compose, createStore, applyMiddleware } from 'redux';\r\nimport { combineReducers } from 'redux-immutable';\r\nimport thunk from 'redux-thunk';\r\nimport createSagaMiddleware, { END } from 'redux-saga';\r\n\r\n// Core reducers\r\nimport NavigationReducer from './reducers/navigation';\r\nimport RoutingReducer from './reducers/routing';\r\nimport UserReducer from '~/features/login/redux/reducers';\r\nimport VersionReducer from './reducers/version';\r\nimport routerMiddleware from './routerMiddleware';\r\n\r\nexport let reduxStore = null;\r\n\r\nexport default (featureReducers, initialState, history) => {\r\n  const thunkMiddleware = [thunk];\r\n\r\n  let reduxDevToolsMiddleware = f => f;\r\n\r\n  if (typeof window != 'undefined') {\r\n    reduxDevToolsMiddleware = window.__REDUX_DEVTOOLS_EXTENSION__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION__()\r\n      : f => f;\r\n  }\r\n\r\n  const sagaMiddleware = createSagaMiddleware();\r\n  const middleware = compose(\r\n    applyMiddleware(\r\n      ...thunkMiddleware,\r\n      sagaMiddleware,\r\n      routerMiddleware(history)\r\n    ),\r\n    reduxDevToolsMiddleware\r\n  );\r\n\r\n  let reducers = {\r\n    navigation: NavigationReducer,\r\n    routing: RoutingReducer,\r\n    user: UserReducer,\r\n    version: VersionReducer,\r\n    ...featureReducers,\r\n  };\r\n\r\n  const combinedReducers = combineReducers(reducers);\r\n\r\n  const store = initialState => {\r\n    const store = createStore(combinedReducers, initialState, middleware);\r\n    store.runSaga = sagaMiddleware.run;\r\n    store.close = () => store.dispatch(END);\r\n    return store;\r\n  };\r\n\r\n  reduxStore = store(initialState);\r\n  return reduxStore;\r\n};\r\n","import { action } from '~/core/util/helpers';\r\nimport { SET_VERSION, SET_VERSION_STATUS } from '~/core/redux/types/version';\r\n\r\nexport const setVersion = (commitRef, buildNo) =>\r\n  action(SET_VERSION, { commitRef, buildNo });\r\n\r\nexport const setVersionStatus = status =>\r\n  action(SET_VERSION_STATUS, { status });\r\n","export const hasNavigationTree = state => {\r\n  return state.getIn(['navigation', 'isReady']);\r\n};\r\n\r\nexport const selectNavigationRoot = state => {\r\n  return state.getIn(['navigation', 'root']);\r\n};\r\n\r\nexport const selectNavigationDepends = state => {\r\n  return state.getIn(['navigation', 'treeDepends']);\r\n};\r\n","export const selectCommitRef = state => {\r\n  return state.getIn(['version', 'commitRef']);\r\n};\r\nexport const selectBuildNumber = state => {\r\n  return state.getIn(['version', 'buildNo']);\r\n};\r\n\r\nexport const selectVersionStatus = state => {\r\n  return state.getIn(['version', 'contensisVersionStatus']);\r\n};\r\n"],"names":["ACTION_PREFIX","GET_NODE_TREE","SET_NODE_TREE","GET_NODE_TREE_ERROR","initialState","Map","root","treeDepends","List","isError","isReady","state","action","type","set","fromJS","nodes","OrderedMap","contentTypeId","currentPath","currentNode","currentNodeAncestors","currentProject","entryID","entry","currentTreeId","entryDepends","isLoading","location","mappedEntry","nodeDepends","notFound","staticRoute","SET_ANCESTORS","ancestors","SET_ENTRY","node","nextState","id","Object","keys","length","sys","removeIn","UPDATE_LOADING_STATE","SET_NAVIGATION_PATH","path","entryUri","getIn","route","component","window","SET_ROUTE","SET_SIBLINGS","currentNodeSiblingParent","siblingIDs","siblings","parentId","map","currentNodeDepends","get","allNodeDepends","Set","union","SET_SURROGATE_KEYS","SET_TARGET_PROJECT","project","allowedGroups","VERSION_PREFIX","SET_VERSION","SET_VERSION_STATUS","commitRef","buildNo","contensisVersionStatus","status","routerMiddleware","history","store","next","CALL_HISTORY_METHOD","payload","method","args","reduxStore","featureReducers","thunkMiddleware","thunk","reduxDevToolsMiddleware","f","__REDUX_DEVTOOLS_EXTENSION__","sagaMiddleware","createSagaMiddleware","middleware","compose","applyMiddleware","reducers","navigation","NavigationReducer","routing","RoutingReducer","user","UserReducer","version","VersionReducer","combinedReducers","combineReducers","createStore","runSaga","run","close","dispatch","END","setVersion","setVersionStatus","hasNavigationTree","selectNavigationRoot","selectNavigationDepends","selectCommitRef","selectBuildNumber","selectVersionStatus"],"mappings":"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"}